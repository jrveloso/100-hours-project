<%- include('partials/header') -%>
<div class="container px-5">
  <div class="card card-side bg-base-100 shadow-xl mt-3">
    <figure><img src="https://ak-static.cms.nba.com/wp-content/uploads/headshots/nba/latest/260x190/<%= picId %>.png" alt="headshot"/></figure>
    <div class="card-body">
      <h2 class="card-title"><%= player.firstName %> <%= player.lastName %></h2>
      <span><%= team.nickname %></span>
      <span><%= player.pos %></span>
      <span><%= player.heightFeet %>' <%= player.heightInches %>"</span>
      <span><%= player.weightPounds %> lbs</span>
      <span>Pick <%= player.draft.pickNum %> in Round <%= player.draft.roundNum %> of <%= player.draft.seasonYear %> Draft</span>
      <span>DOB: <%= player.dateOfBirthUTC %></span>
      <div class="card-actions justify-start">
        
        <% if(!onWatchlist.some(player => player.playerId ==picId && player.user == user.id )) { %>
          <form action="/player/<%= player.personId %>" method="POST">
            <button type="submit" 
                    class="btn btn-primary fa fa-plus" 
                    >
            </button>
          </form>
        <% } %>
     
      </div>
    </div>
  </div>

  <div class="overflow-x-auto mt-3">
    <table class="table table-zebra w-full">
      <!-- head -->
      <thead>
        <tr>
          <th></th>
          <th>GP</th>
          <th>MIN</th>
          <th>PTS</th>
          <th>FGM</th>
          <th>FGA</th>
          <th>FG%</th>
          <th>3PM</th>
          <th>3PA</th>
          <th>3P%</th>
          <th>FTM</th>
          <th>FTA</th>
          <th>FT%</th>
          <th>OREB</th>
          <th>DREB</th>
          <th>REB</th>
          <th>AST</th>
          <th>TOV</th>
          <th>STL</th>
          <th>BLK</th>
          <th>PF</th>
        </tr>
      </thead>
      <tbody>
        <!-- row 1 -->
        <% for(var i=0; i<stats.length; i++) {%>
          <tr>
            <th><%= stats[i].seasonYear %></th>
            <td><%= stats[i].teams[0].gamesPlayed %></td>
            <td><%= stats[i].teams[0].mpg %></td>
            <td><%= stats[i].teams[0].ppg %></td>
            <td><%= (stats[i].teams[0].fgm / stats[i].teams[0].gamesPlayed).toFixed(1) %></td>
            <td><%= (stats[i].teams[0].fga / stats[i].teams[0].gamesPlayed).toFixed(1) %></td>
            <td><%= stats[i].teams[0].fgp %></td>
            <td><%= (stats[i].teams[0].tpm / stats[i].teams[0].gamesPlayed).toFixed(1) %></td>
            <td><%= (stats[i].teams[0].tpa / stats[i].teams[0].gamesPlayed).toFixed(1) %></td>
            <td><%= stats[i].teams[0].tpp %></td>
            <td><%= (stats[i].teams[0].ftm / stats[i].teams[0].gamesPlayed).toFixed(1)%></td>
            <td><%= (stats[i].teams[0].fta / stats[i].teams[0].gamesPlayed).toFixed(1) %></td>
            <td><%= stats[i].teams[0].ftp %></td>
            <td><%= (stats[i].teams[0].offReb / stats[i].teams[0].gamesPlayed).toFixed(1) %></td>
            <td><%= (stats[i].teams[0].defReb / stats[i].teams[0].gamesPlayed).toFixed(1) %></td>
            <td><%= stats[i].teams[0].rpg %></td>
            <td><%= stats[i].teams[0].apg %></td>
            <td><%= stats[i].teams[0].topg %></td>
            <td><%= stats[i].teams[0].spg %></td>
            <td><%= stats[i].teams[0].bpg %></td>
            <td><%= (stats[i].teams[0].pFouls / stats[i].teams[0].gamesPlayed).toFixed(1) %></td>
          </tr>
        <% } %>
      </tbody>
    </table>
  </div>
</div>

<%- include('partials/footer') -%>